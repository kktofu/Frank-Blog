{% include "header.html" %}
{% load bootstrap5 %}
{% load static %}
<!-- Page Header-->
<header class="masthead" style="background-image: url('{{post.img_url}}')">
  <div class="container position-relative px-4 px-lg-5">
    <div class="row gx-4 gx-lg-5 justify-content-center">
      <div class="col-md-10 col-lg-8 col-xl-7">
        <div class="post-heading">
          <h1>{{ post.title }}</h1>
          <h2 class="subheading">{{ post.subtitle }}</h2>
          <span class="meta"
            >Posted by
            <a href="#">{{ post.author }}</a>
            on {{ post.date }}
          </span>
        </div>
      </div>
    </div>
  </div>
</header>

<!-- Post Content -->
<article>
  <div class="container px-4 px-lg-5">
    <div class="row gx-4 gx-lg-5 justify-content-center">
      <div class="col-md-10 col-lg-8 col-xl-7">
        {{ post.body|safe }}

        <div class="d-flex justify-content-end mb-4">
          <!-- TODO: Editing posts-->
          <a
            class="btn btn-primary float-right"
            href="{% url 'edit_post' post_id=post.pk%}"
            >Edit Post</a
          >
        </div>
        <form action="{% url 'show_post' post_id=post.pk%}" method = "post">
          {% csrf_token %}
          {{ comment_form.media }}
          {% bootstrap_form comment_form %}
          <input class="btn btn-primary" type = "submit" value="submit Comment">
        </form>
          <!-- Show all comments -->

        {% for comment in post.parent_post.all %}
        <div class="comment-widgets mt-2">
          <!-- Comment Row -->
          <div class="d-flex flex-row comment-row m-t-0">
            <div class="p-2">
              <img src="{% static 'assets/img/user.jpg' %}" alt="user" width="50" class="rounded-circle">
            </div>
            <div class="comment-text w-100">
                <h6 class="font-medium mb-0 mt-2">{{ comment.comment_author }}</h6>
                <span class="m-b-10 d-block">{{ comment.text|striptags }}</span>
            </div>
          </div>
        </div>
        {% endfor %}
      </div>
    </div>
  </div>
</article>

{% include "footer.html" %}
